dependencies:
    pre:
        - if ! $(grep -q "Revision=25.1.6" $ANDROID_HOME/tools/source.properties); then echo y | android update sdk -u -a -t "tools"; fi
        - if [ ! -e $ANDROID_HOME/build-tools/23.0.3 ]; then echo y | android update sdk -u -a -t "build-tools-23.0.3"; fi
    cache_directories:
        - /usr/local/android-sdk-linux/tools
        - /usr/local/android-sdk-linux/build-tools/23.0.3
test:
    override:
        - ./gradlew build -PdisablePreDex:
            environment:
                VISITOR_DETECTOR_WIFI_SSIDS: fli-fi,fli-fi-n
                VISITOR_DETECTOR_ROUTER_IP_ADDRESS: 192.168.1.1
                VISITOR_DETECTOR_ROUTER_USERNAME: $VISITOR_DETECTOR_ROUTER_USERNAME
                VISITOR_DETECTOR_ROUTER_PASSWORD: $VISITOR_DETECTOR_ROUTER_PASSWORD
    post:
        - cp -r app/build/outputs $CIRCLE_ARTIFACTS
